import { Logger } from '@nestjs/common';
import { IQueryHandler, QueryHandler } from '@nestjs/cqrs';
import { <%= namePluralPascal %>Repository } from '../../<%= namePlural %>.repository';
import { <%= namePascal %> } from '../../schemas';
import { <%= namePascal %>Query } from '../impl';

@QueryHandler(<%= namePascal %>Query)
export class <%= namePascal %>Handler implements IQueryHandler<<%= namePascal %>Query, <%= namePascal %>> {
  private logger = new Logger(<%= namePascal %>Handler.name);

  constructor(private readonly repository: <%= namePluralPascal %>Repository) {}

  async execute({ id }: <%= namePascal %>Query): Promise<<%= namePascal %>> {
    this.logger.debug(`<%= namePascal %>: ${id}`);
    return this.repository.findOne(id);
  }
}
