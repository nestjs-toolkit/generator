import { Logger } from '@nestjs/common';
import { IQueryHandler, QueryHandler } from '@nestjs/cqrs';
import { <%= namePluralPascal %>Repository } from '../../<%= namePlural %>.repository';
import { <%= namePascal %> } from '../../schemas';
import { <%= namePascal %>Query } from '../impl';

@QueryHandler(<%= namePascal %>Query)
export class <%= namePascal %>Handler implements IQueryHandler<<%= namePascal %>Query, any> {
  private logger = new Logger(<%= namePascal %>Handler.name);

  constructor(private readonly repository: <%= namePluralPascal %>Repository) {}

  execute({ dto }: <%= namePascal %>Query): Promise<any> {
    this.logger.debug(`<%= namePascal %>: ${dto}`);
    return this.repository.findOne(dto);
  }
}
